
<div class="title">
    <div>
        LIST OF DEALERSHIPS
    </div>
    <button  mat-stroked-button (click)="addDealership()" class="new-button">Add new dealership </button> 
</div>
<div class="text-search">
    <mat-form-field appearance="outline">
        <input matInput type="text"  [(ngModel)]="searchText" placeholder="Search on dealership name..." (ngModelChange)="onSearchChange()">
    </mat-form-field>
    <button class="search-btn"  mat-raised-button color="primary" (click)="search()" >Search</button> 
</div>
<!-- ERROR -->
<div class="error" *ngIf="hasError">
    An error was occurred while retrieving data
</div>
<!-- USER DETAIL -->
<div>
    <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)">
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>

        <ng-container matColumnDef="nbCar">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Amount of Car </th>
            <td mat-cell *matCellDef="let element"> {{element.cars?.length | number }} </td>
        </ng-container>

        <ng-container matColumnDef="totalBudget">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Total Budget </th>
            <td mat-cell *matCellDef="let element"> {{element.totalBudget | number }} </td>
        </ng-container>

        <ng-container matColumnDef="remainingBudget">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Remaining  Budget </th>
            <td mat-cell *matCellDef="let element"> {{element.remainingBudget | number }} </td>
        </ng-container>

        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> Actions </th>
            <td mat-cell *matCellDef="let element" class="button-row"> 
                <button  mat-stroked-button (click)="editDealership(element)">Edit</button> 
                <button  mat-stroked-button color="warn" (click)="deleteDealership(element)">Delete</button> 
                <button  mat-raised-button color="primary" (click)="viewDealershipCars(element)">Cars</button> 
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
</div>